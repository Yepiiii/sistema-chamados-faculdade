<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Chamado - Sistema de Chamados</title>
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="wrap">
                <div class="brand">
                    <h1>Sistema de Chamados</h1>
                </div>
                <nav>
                    <a href="dashboard.html">Dashboard</a>
                    <a href="novo-ticket.html">Novo Chamado</a>
                    <a href="config.html">Configura√ß√µes</a>
                    <a href="#" id="logoutBtn">Sair</a>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="page-header">
                <h2>Detalhes do Chamado</h2>
                <button id="backBtn" class="btn btn-outline">‚Üê Voltar</button>
            </div>

            <!-- Chamado Info Card -->
            <div class="card" id="chamadoCard">
                <!-- Header com ID e Status -->
                <div class="chamado-header">
                    <div>
                        <h3 id="chamadoTitulo">Carregando...</h3>
                        <span class="text-muted">#<span id="chamadoId">-</span></span>
                    </div>
                    <span id="chamadoStatus" class="badge">-</span>
                </div>

                <!-- Informa√ß√µes Principais -->
                <div class="chamado-info-grid">
                    <div class="info-item">
                        <label>Prioridade</label>
                        <span id="chamadoPrioridade" class="badge">-</span>
                    </div>
                    <div class="info-item">
                        <label>Categoria</label>
                        <span id="chamadoCategoria">-</span>
                    </div>
                    <div class="info-item">
                        <label>Criado em</label>
                        <span id="chamadoDataCriacao">-</span>
                    </div>
                    <div class="info-item">
                        <label>√öltima atualiza√ß√£o</label>
                        <span id="chamadoDataAtualizacao">-</span>
                    </div>
                </div>

                <!-- Descri√ß√£o -->
                <div class="chamado-section">
                    <h4>Descri√ß√£o</h4>
                    <div id="chamadoDescricao" class="chamado-description">-</div>
                </div>

                <!-- T√©cnico Atribu√≠do -->
                <div class="chamado-section" id="tecnicoSection">
                    <h4>T√©cnico Atribu√≠do</h4>
                    <div id="tecnicoInfo" class="tecnico-card">
                        <div class="tecnico-avatar">üë§</div>
                        <div class="tecnico-details">
                            <strong id="tecnicoNome">-</strong>
                            <span class="text-muted" id="tecnicoEmail">-</span>
                        </div>
                    </div>
                </div>

                <!-- Scores do Handoff (Admin apenas) -->
                <div class="chamado-section" id="scoresSection" style="display: none;">
                    <h4>ü§ñ An√°lise do Handoff</h4>
                    <div id="scoresContent">
                        <!-- Preenchido via JS -->
                    </div>
                </div>

                <!-- Justificativa IA (se dispon√≠vel) -->
                <div class="chamado-section" id="justificativaSection" style="display: none;">
                    <h4>üí° Justificativa da IA</h4>
                    <div id="justificativaText" class="justification-text">-</div>
                </div>
            </div>

            <!-- A√ß√µes (baseado em role) -->
            <div class="card" id="acoesCard">
                <h4>A√ß√µes</h4>
                <div class="actions-grid" id="acoesContainer">
                    <!-- Preenchido via JS baseado em role -->
                </div>
            </div>

            <!-- Hist√≥rico / Timeline -->
            <div class="card" id="historicoCard">
                <h4>Hist√≥rico de Atualiza√ß√µes</h4>
                <div id="historicoTimeline" class="timeline">
                    <!-- Preenchido via JS -->
                </div>
            </div>

            <!-- Coment√°rios / Notas (futuro) -->
            <div class="card" id="comentariosCard" style="display: none;">
                <h4>Coment√°rios</h4>
                <div id="comentariosList">
                    <!-- Futuro: sistema de coment√°rios -->
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Sistema de Chamados - Faculdade ¬© 2025</p>
        </footer>
    </div>

    <!-- Modal: Atualizar Status (T√©cnico) -->
    <div id="statusModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Atualizar Status</h3>
                <button class="modal-close" id="closeStatusModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="novoStatus">Novo Status</label>
                    <select id="novoStatus" class="form-control">
                        <option value="">Selecione...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="notaTecnica">Nota T√©cnica (opcional)</label>
                    <textarea id="notaTecnica" class="form-control" rows="4" 
                        placeholder="Descreva o que foi feito..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelStatusBtn">Cancelar</button>
                <button class="btn btn-primary" id="confirmStatusBtn">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Reatribuir T√©cnico (Admin) -->
    <div id="reatribuirModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reatribuir T√©cnico</h3>
                <button class="modal-close" id="closeReatribuirModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="novoTecnico">Selecionar T√©cnico</label>
                    <select id="novoTecnico" class="form-control">
                        <option value="">Selecione...</option>
                    </select>
                </div>
                <div class="alert alert-info">
                    <strong>‚ÑπÔ∏è Info:</strong> O t√©cnico atual ser√° notificado da mudan√ßa.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelReatribuirBtn">Cancelar</button>
                <button class="btn btn-primary" id="confirmReatribuirBtn">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Alterar Prioridade (Admin) -->
    <div id="prioridadeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Alterar Prioridade</h3>
                <button class="modal-close" id="closePrioridadeModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="novaPrioridade">Nova Prioridade</label>
                    <select id="novaPrioridade" class="form-control">
                        <option value="">Selecione...</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelPrioridadeBtn">Cancelar</button>
                <button class="btn btn-primary" id="confirmPrioridadeBtn">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Confirmar Fechamento -->
    <div id="fecharModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Fechar Chamado</h3>
                <button class="modal-close" id="closeFecharModal">√ó</button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja fechar este chamado?</p>
                <p class="text-muted">Esta a√ß√£o marcar√° o chamado como conclu√≠do.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelFecharBtn">Cancelar</button>
                <button class="btn btn-danger" id="confirmFecharBtn">Fechar Chamado</button>
            </div>
        </div>
    </div>

    <!-- Modal de Loading -->
    <div id="loadingModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <div class="spinner"></div>
            <p id="loadingMessage">Carregando...</p>
        </div>
    </div>

    <script src="../assets/js/loading.js"></script>`r`n    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/ticket-detalhes.js"></script>
</body>
</html>
